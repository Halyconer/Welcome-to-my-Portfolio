<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Adrian Eddy's Portfolio</title>
        <link rel="stylesheet" href="styles.css" />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
        />
        <style>
            #light-greeting {
                background: #f8f9fa;
                padding: 2rem 2rem;
            }

            .light-control-wrapper {
                max-width: 500px;
                margin: 0 auto;
                text-align: center;
            }

            .light-control-wrapper h2 {
                color: #2c3e50;
                font-size: 2rem;
                font-weight: 300;
                margin-bottom: 1rem;
                letter-spacing: -0.02em;
            }

            .light-control-wrapper > p {
                color: #5a6c7d;
                margin-bottom: 2rem;
                line-height: 1.6;
            }
            .minimal-slider-container {
                background: white;
                border-radius: 16px;
                padding: 2rem;
                box-shadow: 0 2px 10px rgba(0, 41, 162, 0.08);
                margin-bottom: 2rem;
            }

            .brightness-label {
                display: flex;
                justify-content: space-between;
                align-items: baseline;
                margin-bottom: 0.5rem;
                color: #2c3e50;
            }

            .brightness-label span {
                font-size: 0.9rem;
                text-transform: uppercase;
                letter-spacing: 0.05em;
                opacity: 0.7;
            }

            .brightness-percentage {
                font-size: 1rem;
                font-weight: 200;
                color: #4a90e2;
            }

            /* Minimal slider */
            .minimal-slider {
                width: 100%;
                height: 4px;
                border-radius: 2px;
                background: #e0e7ff;
                outline: none;
                -webkit-appearance: none;
                appearance: none;
                cursor: pointer;
                transition: all 0.3s ease;
            }

            .minimal-slider::-webkit-slider-thumb {
                -webkit-appearance: none;
                appearance: none;
                width: 20px;
                height: 20px;
                border-radius: 50%;
                background: #4a90e2;
                cursor: pointer;
                transition: all 0.2s ease;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            }

            .minimal-slider::-webkit-slider-thumb:hover {
                transform: scale(1.2);
                background: #357abd;
                box-shadow: 0 2px 8px rgba(74, 144, 226, 0.3);
            }

            .minimal-slider::-moz-range-thumb {
                width: 20px;
                height: 20px;
                border-radius: 50%;
                background: #4a90e2;
                cursor: pointer;
                border: none;
                transition: all 0.2s ease;
            }

            .send-button {
                background: #4a90e2;
                color: white;
                border: none;
                padding: 14px 32px;
                border-radius: 8px;
                font-size: 1rem;
                font-weight: 500;
                cursor: pointer;
                transition: all 0.3s ease;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            }

            .send-button:hover {
                background: #357abd;
                transform: translateY(-2px);
                box-shadow: 0 4px 12px rgba(74, 144, 226, 0.3);
            }

            .send-button:active {
                transform: translateY(0);
            }

            .status-text {
                margin-top: 1rem;
                font-size: 0.9rem;
                color: #5a6c7d;
                min-height: 1.2rem;
            }

            .tech-note {
                background: #e8f0fe;
                border-radius: 8px;
                padding: 1rem;
                margin-top: 2rem;
                font-size: 0.85rem;
                color: #5a6c7d;
            }

            .tech-note a {
                color: #4a90e2;
                text-decoration: none;
                font-weight: 500;
            }

            .tech-note a:hover {
                text-decoration: underline;
            }

            /* Spotify Section Styles */
            #spotify-stats {
                background: linear-gradient(135deg, #1db954 0%, #1ed760 100%);
                padding: 3rem 2rem;
                color: white;
            }

            .spotify-wrapper {
                max-width: 600px;
                margin: 0 auto;
                text-align: center;
            }

            .spotify-wrapper h2 {
                font-size: 2rem;
                font-weight: 300;
                margin-bottom: 1rem;
                letter-spacing: -0.02em;
            }

            .spotify-wrapper > p {
                opacity: 0.9;
                margin-bottom: 2rem;
                line-height: 1.6;
            }

            .spotify-container {
                background: rgba(255, 255, 255, 0.1);
                border-radius: 16px;
                padding: 2rem;
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.2);
            }

            .artists-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
                gap: 1.5rem;
                margin-bottom: 1.5rem;
            }

            .artist-card {
                display: flex;
                flex-direction: column;
                align-items: center;
                transition: transform 0.3s ease;
            }

            .artist-card:hover {
                transform: translateY(-5px);
            }

            .artist-image {
                width: 80px;
                height: 80px;
                border-radius: 50%;
                object-fit: cover;
                margin-bottom: 0.5rem;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
                border: 2px solid rgba(255, 255, 255, 0.3);
            }

            .artist-placeholder {
                width: 80px;
                height: 80px;
                border-radius: 50%;
                background: rgba(255, 255, 255, 0.2);
                display: flex;
                align-items: center;
                justify-content: center;
                margin-bottom: 0.5rem;
                font-size: 1.5rem;
            }

            .artist-name {
                font-size: 0.8rem;
                font-weight: 500;
                text-align: center;
                line-height: 1.2;
                opacity: 0.9;
            }

            .last-updated {
                font-size: 0.75rem;
                opacity: 0.7;
                margin-top: 1rem;
            }

            .loading-state {
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 2rem;
                font-size: 0.9rem;
                opacity: 0.8;
            }

            .loading-spinner {
                width: 20px;
                height: 20px;
                border: 2px solid rgba(255, 255, 255, 0.3);
                border-top: 2px solid white;
                border-radius: 50%;
                animation: spin 1s linear infinite;
                margin-right: 0.5rem;
            }

            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }

            .hero h1 {
                opacity: 0;
                animation: slideInFromLeft 1.2s ease-out 0.5s forwards;
            }

            .hero .subtitle {
                opacity: 0;
                animation: slideInFromRight 1.2s ease-out 1s forwards;
            }

            .hero .button {
                opacity: 0;
                animation: fadeInUp 1s ease-out 1.5s forwards;
            }

            @keyframes slideInFromLeft {
                0% {
                    opacity: 0;
                    transform: translateX(-50px);
                }
                100% {
                    opacity: 1;
                    transform: translateX(0);
                }
            }

            @keyframes slideInFromRight {
                0% {
                    opacity: 0;
                    transform: translateX(50px);
                }
                100% {
                    opacity: 1;
                    transform: translateX(0);
                }
            }

            @keyframes fadeInUp {
                0% {
                    opacity: 0;
                    transform: translateY(30px);
                }
                100% {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
        </style>
    </head>
    <body>
        <!-- Navigation -->
        <nav>
            <ul class="nav">
                <li><a href="index.html">About Me</a></li>
                <li><a href="resume.html">Resume</a></li>
                <li><a href="dev-roadtrip.html">Road Trip</a></li>
            </ul>
        </nav>

        <!-- Hero Section -->
        <section class="hero">
            <div class="hero-text">
                <h1 style="font-size: 3rem; margin-bottom: 0.5rem">
                    Hi, I'm Adrian.
                </h1>
                <p class="subtitle" style="margin-top: -0.4rem">
                    Economics @ NYU Â· Data, Markets & Machines
                </p>
                <a
                    href="#light-greeting"
                    class="button"
                    style="margin-top: 1rem !important; display: inline-block; position: relative; z-index: 10;"
                    >Say Hello</a
                >
            </div>
        </section>

        <!-- Interactive Light Control Section -->
        <section id="light-greeting">
            <div class="light-control-wrapper">
                <h2>Control My Room Lights</h2>
                <p>
                    From anywhere in the world, adjust the ambient lighting in
                    my NYU dorm. A simple hello becomes a connected experience.
                </p>

                <div class="minimal-slider-container">
                    <div class="brightness-label">
                        <span>Brightness</span>
                        <div class="brightness-percentage">
                            <span id="brightnessValue">75</span>%
                        </div>
                    </div>

                    <input
                        type="range"
                        id="brightnessSlider"
                        min="1"
                        max="100"
                        value="75"
                        class="minimal-slider"
                    />
                </div>

                <button id="setBrightnessBtn" class="send-button">
                    Send Greeting
                </button>

                <p id="brightnessStatus" class="status-text"></p>

                <div class="tech-note">
                    ðŸ’¡ Powered by
                    <a
                        href="https://www.amazon.com/ANWIO-Multicolor-Compatible-Assistant-Equivalent/dp/B08BR62RXM"
                        target="_blank"
                        rel="noopener"
                        >smart RGB bulbs</a
                    >
                    and a custom API
                </div>
            </div>
        </section>

        <!-- Spotify Stats Section -->
        <section id="spotify-stats">
            <div class="spotify-wrapper">
                <h2>Current Listening Habits</h2>
                <p>
                    A real-time glimpse into my musical tasteâ€”my top artists from the past month, 
                    refreshed daily via Spotify's API.
                </p>

                <div class="spotify-container">
                    <div id="spotify-content">
                        <div class="loading-state">
                            <div class="loading-spinner"></div>
                            Fetching latest listening data...
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- About Me Section -->
        <section id="about" class="about-me">
            <div class="about-me-container">
                <div class="about-text">
                    <div class="about-content">
                        <p>
                            Economics student at NYU with a passion for
                            connecting data, markets, and technology. I bridge
                            analytical thinking with hands-on
                            problem-solving. Whether it is building race cars
                            with NYU Motorsports or developing data-driven
                            market reports with NYU's Fed Challenge team, I
                            thrive on challenges that require both problem-solving
                            and technical skills.
                        </p>
                        <p>
                            I am self-taught in programming with it being one
                            of my many hobbies. When I'm not diving into
                            market trends or coding, you'll find me on the
                            football pitch or in the garage optimizing race
                            performance through telemetry.
                        </p>
                        <p>
                            Let's connect:
                            <a href="mailto:ae2422@nyu.edu">ae2422@nyu.edu</a>
                        </p>
                        <p style="margin-top: 1.5rem">
                            <a href="resume.html" class="button"
                                >View My Resume</a
                            >
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <script>
            const API_URL = 'https://valid-goblin-full.ngrok-free.app'
            const API_KEY = 'your-secret-key'

            const slider = document.getElementById('brightnessSlider')
            const label = document.getElementById('brightnessValue')
            const btn = document.getElementById('setBrightnessBtn')
            const msg = document.getElementById('brightnessStatus')

            // Live-update the numeric readout
            slider.addEventListener('input', () => {
                label.textContent = slider.value
            })

            btn.addEventListener('click', () => {
                const brightness = slider.value
                msg.textContent = `Setting brightness to ${brightness}%...`

                btn.disabled = true
                btn.textContent = 'Sending...'

                fetch(`${API_URL}/set_brightness`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'ngrok-skip-browser-warning': 'true',
                        //'q7x!K3L9fN*zaP2vR1yW0hT8mB5sG4c': API_KEY
                    },
                    body: JSON.stringify({ brightness: parseInt(brightness) }),
                })
                    .then((response) => {
                        if (!response.ok) {
                            throw new Error(
                                `HTTP ${response.status}: ${response.statusText}`
                            )
                        }
                        return response.json()
                    })
                    .then((data) => {
                        if (data.status === 'success') {
                            msg.textContent = `âœ“ Lights set to ${data.brightness_set}% â€” thanks for the greeting!`
                        } else {
                            msg.textContent = `Ã— ${data.error || 'Unknown error'}`
                        }
                    })
                    .catch((err) => {
                        console.error('Fetch error:', err)
                        // Provide more specific error messages
                        if (
                            err.message.includes('Failed to fetch') ||
                            err.message.includes('NetworkError')
                        ) {
                            msg.textContent = `Ã— My personal high-tech self-built server is offline - please try again later`
                        } else if (err.message.includes('404')) {
                            msg.textContent = `Ã— Light control endpoint not found - I messed up the code...`
                        } else if (err.message.includes('500')) {
                            msg.textContent = `Ã— Server error - my raspberry pi is probably overloaded`
                        } else {
                            msg.textContent = `Ã— Connection failed: ${err.message}`
                        }
                    })
                    .finally(() => {
                        btn.disabled = false
                        btn.textContent = 'Send Greeting'
                    })
            })

            // Spotify Stats Functionality
            async function loadSpotifyStats() {
                const contentDiv = document.getElementById('spotify-content')
                
                try {
                    const response = await fetch(`${API_URL}/spotify_stats.json`, {
                        headers: {
                            'ngrok-skip-browser-warning': 'true'
                        }
                    })
                    
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}`)
                    }
                    
                    const data = await response.json()
                    
                    if (data.artists && data.artists.length > 0) {
                        const artistsHtml = data.artists.map(artist => `
                            <div class="artist-card">
                                ${artist.image_url 
                                    ? `<img src="${artist.image_url}" alt="${artist.name}" class="artist-image" />`
                                    : `<div class="artist-placeholder">ðŸŽµ</div>`
                                }
                                <div class="artist-name">${artist.name}</div>
                            </div>
                        `).join('')
                        
                        const lastUpdated = new Date(data.last_updated_utc).toLocaleDateString('en-US', {
                            month: 'short',
                            day: 'numeric',
                            hour: '2-digit',
                            minute: '2-digit'
                        })
                        
                        contentDiv.innerHTML = `
                            <div class="artists-grid">
                                ${artistsHtml}
                            </div>
                            <div class="last-updated">Last updated: ${lastUpdated}</div>
                        `
                    } else {
                        contentDiv.innerHTML = `
                            <div style="padding: 2rem; opacity: 0.8;">
                                No recent listening data availableâ€”perhaps I've been too focused on coding!
                            </div>
                        `
                    }
                } catch (error) {
                    console.error('Failed to load Spotify stats:', error)
                    contentDiv.innerHTML = `
                        <div style="padding: 2rem; opacity: 0.8;">
                            ðŸŽµ Musical data temporarily unavailableâ€”my Pi might be taking a break
                        </div>
                    `
                }
            }

            // Load Spotify stats when page loads
            document.addEventListener('DOMContentLoaded', loadSpotifyStats)
        </script>

        <script>
            // Smooth scroll for anchor links
            document.addEventListener('DOMContentLoaded', function () {
                document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
                    anchor.addEventListener('click', function (e) {
                        e.preventDefault()

                        const targetId = this.getAttribute('href')
                        const targetElement = document.querySelector(targetId)

                        if (targetElement) {
                            window.scrollTo({
                                top: targetElement.offsetTop - 20,
                                behavior: 'smooth',
                            })
                        }
                    })
                })
            })
        </script>

        <footer>
            <p>Â© 2025 Adrian Eddy. All rights reserved.</p>
        </footer>
    </body>
</html>
<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Adrian Eddy's Portfolio</title>
        <link rel="stylesheet" href="styles.css" />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
        />
    </head>
    <body>
        <!-- Navigation -->
        <nav class="floating-nav">
            <ul class="nav">
                <li><a href="index.html">About Me</a></li>
                <li><a href="#resume">Resume</a></li>
                <li><a href="dev-roadtrip.html">Road Trip</a></li>
            </ul>
        </nav>

        <!-- Hero Section -->
        <section class="hero">
            <div class="hero-text">
                <h1>Hi, I'm Adrian.</h1>
                <p class="subtitle">
                    Economics @ NYU Â· Data, Markets & Machines
                </p>
                <div class="cta-buttons">
                    <a href="#resume" class="cta-resume">Skip to Resume</a>
                    <a href="#light-greeting" class="cta-lights">Room Lights</a>
                </div>
            </div>
        </section>

        <!-- Interactive Light Control Section -->
        <section id="light-greeting">
            <div class="light-control-wrapper">
                <h2>IoT Lighting Control</h2>
                <p>
                    Live hardware integration via Flask API â†’ Raspberry Pi â†’ GPIO pins. Real-time remote control through secure ngrok tunnel.
                </p>

                <div class="minimal-slider-container">
                    <div class="brightness-label">
                        <span>Brightness</span>
                        <div class="brightness-percentage">
                            <span id="brightnessValue">75</span>%
                        </div>
                    </div>
                    <label for="brightnessSlider" class="visually-hidden">Adjust Brightness</label>
                    <input
                        type="range"
                        id="brightnessSlider"
                        min="1"
                        max="100"
                        value="75"
                        class="minimal-slider"
                        title="Adjust Brightness"
                    />
                </div>

                <button id="setBrightnessBtn" class="send-button">
                    Send Command
                </button>

                <p id="brightnessStatus" class="status-text"></p>
            </div>
        </section>

        <!-- About Me Section -->
        <section id="about" class="about-me">
            <div class="about-me-container">
                <div class="about-text">
                    <div class="about-content">
                        <p>
                            I thrive on challenges that merge data, markets, and technology.
                        </p>
                        <p>
                            Let's connect:
                            <a href="mailto:ae2422@nyu.edu">ae2422@nyu.edu</a>
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Projects Section -->
        <section class="projects-section">
            <div class="projects-container">
                <h2>Projects</h2>
                
                <div class="projects-list-vertical">
                    <div class="project-vertical">
                        <div class="project-visual">
                            <img src="assets/connect4.jpg" alt="Connect 4" />
                        </div>
                        <div class="project-content">
                            <h3>Connect 4 AI</h3>
                            <ul>
                                <li><strong>Relevance:</strong> Demonstrates algorithm design and game theory implementation</li>
                                <li><strong>Summary:</strong> Interactive web-based Connect 4 game with AI opponent using minimax algorithm and alpha-beta pruning for optimal move calculation</li>
                                <li><strong>Tech Stack:</strong> Python, Flask, JavaScript, deployed on Raspberry Pi</li>
                                <li><button onclick="showConnect4Game()" class="play-button">Play Game</button></li>
                            </ul>
                        </div>
                    </div>

                    <div class="project-vertical">
                        <div class="project-visual">
                            <img src="assets/lightbulb_diagram.jpg" alt="Smart Home" />
                        </div>
                        <div class="project-content">
                            <h3>Smart Home IoT System</h3>
                            <ul>
                                <li><strong>Relevance:</strong> Full-stack development with hardware integration and real-time control</li>
                                <li><strong>Summary:</strong> Remote lighting control system accessible globally through web interface, featuring real-time hardware integration via Flask API</li>
                                <li><strong>Tech Stack:</strong> Python, Flask, Raspberry Pi, GPIO, ngrok for secure tunneling</li>
                            </ul>
                        </div>
                    </div>

                    <div class="project-vertical">
                        <div class="project-visual">
                            <img src="assets/fed.png" alt="Federal Reserve" />
                        </div>
                        <div class="project-content">
                            <h3>NYU Fed Challenge</h3>
                            <ul>
                                <li><strong>Relevance:</strong> Applied economic analysis and data-driven policy recommendations</li>
                                <li><strong>Summary:</strong> Comprehensive macroeconomic analysis and monetary policy recommendations presented to Federal Reserve Bank officials</li>
                                <li><strong>Focus:</strong> Economic forecasting, data visualization, Federal Reserve policy analysis</li>
                            </ul>
                        </div>
                    </div>

                    <div class="project-vertical">
                        <div class="project-visual">
                            <img src="assets/Screenshot 2025-09-04 at 11.46.01.png" alt="Financial Models" />
                        </div>
                        <div class="project-content">
                            <h3>Financial Pricing Models</h3>
                            <ul>
                                <li><strong>Relevance:</strong> Quantitative finance and advanced mathematical modeling</li>
                                <li><strong>Summary:</strong> Suite of financial modeling tools including Black-Scholes options pricing, Monte Carlo simulations, CAPM, and stochastic models (Hull-White, Heston)</li>
                                <li><strong>Tech Stack:</strong> Python, React, FastAPI, Plotly for interactive visualizations</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Resume Section -->
        <section id="resume" class="resume-embed-section">
            <div class="resume-container">
                <h2>Resume</h2>
                <div class="resume-controls">
                    <button id="openResumeFullscreen" class="resume-btn">Open Full Screen</button>
                    <a href="assets/AdrianEddy.pdf" download class="resume-btn">Download PDF</a>
                </div>
                <div class="resume-embed">
                    <iframe src="assets/AdrianEddy.pdf" id="resumeEmbed" title="Adrian Eddy Resume PDF"></iframe>
                </div>
            </div>
        </section>

        <script>
            // Wait for DOM to be fully loaded
            document.addEventListener('DOMContentLoaded', function() {
                // Single API base URL for all services via nginx
                const API_BASE_URL = 'https://valid-goblin-full.ngrok-free.app'
                const LIGHTING_API_URL = API_BASE_URL + '/lighting'
                const slider = document.getElementById('brightnessSlider')
                const label = document.getElementById('brightnessValue')
                const btn = document.getElementById('setBrightnessBtn')
                const msg = document.getElementById('brightnessStatus')

                // Resume full screen functionality
                const openResumeBtn = document.getElementById('openResumeFullscreen')

                if (openResumeBtn) {
                    openResumeBtn.addEventListener('click', () => {
                        window.open('assets/AdrianEddy.pdf', '_blank')
                    })
                }

                // Live-update the numeric readout
                if (slider && label) {
                    slider.addEventListener('input', () => {
                        label.textContent = slider.value
                    })
                }

                if (btn && msg) {
                    btn.addEventListener('click', () => {
                        const brightness = slider.value
                        msg.textContent = `Setting brightness to ${brightness}%...`

                        btn.disabled = true
                        btn.textContent = 'Sending...'

                        fetch(`${LIGHTING_API_URL}/set_brightness`, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'ngrok-skip-browser-warning': 'true',
                            },
                            body: JSON.stringify({ brightness: parseInt(brightness) }),
                        })
                            .then((response) => {
                                if (!response.ok) {
                                    throw new Error(
                                        `HTTP ${response.status}: ${response.statusText}`
                                    )
                                }
                                return response.json()
                            })
                            .then((data) => {
                                if (data.status === 'success') {
                                    msg.textContent = `âœ“ Lights set to ${data.brightness_set}% â€” thanks for the greeting!`
                                } else {
                                    msg.textContent = `Ã— ${data.error || 'Unknown error'}`
                                }
                            })
                            .catch((err) => {
                                console.error('Fetch error:', err)
                                if (
                                    err.message.includes('Failed to fetch') ||
                                    err.message.includes('NetworkError')
                                ) {
                                    msg.textContent = `Ã— My personal high-tech self-built server is offline - please try again later`
                                } else if (err.message.includes('404')) {
                                    msg.textContent = `Ã— Light control endpoint not found - I messed up the code...`
                                } else if (err.message.includes('500')) {
                                    msg.textContent = `Ã— Server error - my raspberry pi is probably overloaded`
                                } else {
                                    msg.textContent = `Ã— Connection failed: ${err.message}`
                                }
                            })
                            .finally(() => {
                                btn.disabled = false
                                btn.textContent = 'Send Command'
                            })
                    })
                }
            })
        </script>

        <script>
            document.addEventListener('DOMContentLoaded', function () {
                document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
                    anchor.addEventListener('click', function (e) {
                        e.preventDefault()

                        const targetId = this.getAttribute('href')
                        const targetElement = document.querySelector(targetId)

                        if (targetElement) {
                            window.scrollTo({
                                top: targetElement.offsetTop - 20,
                                behavior: 'smooth',
                            })
                        }
                    })
                })
            })
        </script>

        <!-- Connect4 Game Modal -->
        <div id="connect4Modal" class="connect4-modal">
            <div class="connect4-modal-content">
                <div class="connect4-header">
                    <h2>Connect 4 vs AI</h2>
                    <span class="connect4-close" onclick="closeConnect4Game()">&times;</span>
                </div>
                
                <div class="connect4-status" id="connect4Status">Click "New Game" to start!</div>
                
                <div class="connect4-controls">
                    <button id="connect4NewGameBtn" onclick="newConnect4Game()">New Game</button>
                </div>
                
                <div class="connect4-board" id="connect4Board"></div>
            </div>
        </div>

        <script>
            // Connect4 Game Integration with Flask API
            const CONNECT4_API_BASE = API_BASE_URL + '/connect4'; // Connect4 via nginx routing
            let connect4GameState = null;
            let isConnect4Processing = false;

            // Initialize empty board display
            function createConnect4Board() {
                const board = document.getElementById('connect4Board');
                board.innerHTML = '';
                
                // Create 42 cells (6 rows Ã— 7 cols), displayed top to bottom
                for (let row = 5; row >= 0; row--) {
                    for (let col = 0; col < 7; col++) {
                        const cell = document.createElement('div');
                        cell.className = 'connect4-cell';
                        cell.dataset.row = row;
                        cell.dataset.col = col;
                        cell.onclick = () => makeConnect4Move(col);
                        board.appendChild(cell);
                    }
                }
            }

            // Update board display based on game state
            function updateConnect4Board() {
                if (!connect4GameState) return;
                
                const cells = document.querySelectorAll('.connect4-cell');
                cells.forEach(cell => {
                    cell.className = 'connect4-cell';
                    const row = parseInt(cell.dataset.row); 
                    const col = parseInt(cell.dataset.col);
                    const piece = connect4GameState.board[row][col];
                    
                    if (piece === 1) cell.classList.add('player1');
                    if (piece === 2) cell.classList.add('player2');
                });
            }

            // Update status message
            function updateConnect4Status(message) {
                document.getElementById('connect4Status').textContent = message;
            }

            // API request function
            async function connect4ApiRequest(endpoint, method = 'GET', data = null) {
                try {
                    const options = {
                        method,
                        headers: {
                            'Content-Type': 'application/json',
                            'ngrok-skip-browser-warning': 'true',
                        },
                    };
                    
                    if (data) {
                        options.body = JSON.stringify(data);
                    }
                    
                    const response = await fetch(CONNECT4_API_BASE + endpoint, options);
                    
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    
                    return await response.json();
                } catch (error) {
                    console.error('Connect4 API request failed:', error);
                    updateConnect4Status('Connection error! Make sure the game server is running on your Pi.');
                    return null;
                }
            }

            async function startConnect4Game() {
                isConnect4Processing = true;
                updateConnect4Status('Starting new game...');
                
                const response = await connect4ApiRequest('/play', 'POST');
                console.log('New Connect4 game response:', response);
                
                if (response) {
                    connect4GameState = response;
                    createConnect4Board();
                    updateConnect4Board();
                    updateConnect4Status('Your turn! Click a column to drop your piece.');
                } else {
                    updateConnect4Status('Failed to start new game. Check server connection.');
                }
                
                isConnect4Processing = false;
            }

            async function makeConnect4Move(col) {
                console.log('Connect4 move called with column:', col);
                
                if (isConnect4Processing || !connect4GameState || connect4GameState.game_over) {
                    console.log('Move blocked - processing:', isConnect4Processing, 'gameState exists:', !!connect4GameState);
                    return;
                }
                
                const validCols = connect4GameState.valid_cols || [];
                console.log('Valid columns:', validCols, 'Clicked:', col);
                
                if (!validCols.includes(col)) {  
                    updateConnect4Status('Invalid move! Column is full.');
                    return;
                }
                
                isConnect4Processing = true;
                updateConnect4Status('Processing move...');
                
                const response = await connect4ApiRequest('/move', 'POST', { column: col });
                
                if (response) {
                    if (response.game_over) {
                        // Game over - show final state
                        connect4GameState = { ...response, board: response.board_after_ai || response.board };
                        updateConnect4Board();
                        
                        if (response.winner === 'player') {
                            updateConnect4Status('ðŸŽ‰ You won! Great job!');
                        } else if (response.winner === 'ai') {
                            updateConnect4Status('ðŸ¤– AI wins! Try again?');
                        } else if (response.winner === 'tie') {
                            updateConnect4Status('ðŸ¤ It\'s a tie! Well played!');
                        } else {
                            updateConnect4Status('Game over!');
                        }
                    } else {
                        // Show player's move first
                        connect4GameState = { ...response, board: response.board_before_ai };
                        updateConnect4Board();
                        updateConnect4Status('Your move made! AI is thinking...');
                        
                        // Add delay before showing AI move
                        setTimeout(() => {
                            connect4GameState = { ...response, board: response.board_after_ai };
                            updateConnect4Board();
                            
                            if (response.ai_move !== null && response.ai_move !== undefined) {
                                updateConnect4Status(`AI dropped in column ${response.ai_move + 1}. Your turn!`);
                            } else {
                                updateConnect4Status('Your turn! Click a column to drop your piece.');
                            }
                        }, 1000);
                    }
                }
                
                isConnect4Processing = false;
            }

            // Modal functions
            function showConnect4Game() {
                document.getElementById('connect4Modal').style.display = 'flex';
            }
            
            function closeConnect4Game() {
                document.getElementById('connect4Modal').style.display = 'none';
            }
            
            function newConnect4Game() {
                startConnect4Game();
            }
            
            // Close modal when clicking outside of it
            window.addEventListener('click', function(event) {
                const modal = document.getElementById('connect4Modal');
                if (event.target === modal) {
                    closeConnect4Game();
                }
            });
        </script>

        <footer>
            <p>Â© 2025 Adrian Eddy. All rights reserved.</p>
        </footer>
    </body>
</html>